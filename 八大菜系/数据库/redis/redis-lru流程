1:freeMemoryIfNeeded() {
 while (mem_freed < mem_tofree) {
    //循环释放直到满足需求内存


    ==> 获取bestkey


     for (i = 0; i < server.dbnum; i++) {
                    //循环16个db删除过期key
                    evictionPoolPopulate();//EVPOOL_SIZE 默认16
                }

      //从redis evictionPool 中选择bestkey
       for (k = EVPOOL_SIZE-1; k >= 0; k--) {}


      //删除dbAsyncDelete bestkey

      mem_freed++;

 }

 }


 2:evictionPoolPopulate 解析
evictionPoolPopulate()
{

 dictGetSomeKeys()随机获取maxmemory_samples个数据


if (server.maxmemory_policy & MAXMEMORY_FLAG_LRU) {
            idle = estimateObjectIdleTime(o);//获取剩余时间
 }

 }


